<!DOCTYPE HTML>
<html>
<head>
  <title>Graph2d | Scatterplot</title>

  <style type="text/css">
    body, html {
      font-family: sans-serif;
    }
  svg > circle:hover, svg > rect:hover, svg > image:hover {
        cursor: pointer;
  }
  </style>

  <script src="../../dist/vis.js"></script>
  <link href="../../dist/vis.css" rel="stylesheet" type="text/css" />
<!--<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-61231638-1', 'auto');ga('send', 'pageview');</script></head>-->
<body>
<h2>Graph2d | Scatterplot using images with groups + onClick highlighting</h2>
<div style="width:700px; font-size:14px; text-align: justify;">
    You can manually disable the automatic sorting of the datapoints by using the <code>sort</code> option. You can use this with the
    <code>style: 'points'</code> option for making a scatterplot!
</div>
<pre class="prettyprint lang-js">
var options = {
    sort: false,
    sampling:false,
    style:'points'
};
</pre>
<br />
<div style="width:700px; font-size:14px; text-align: justify;">
    This also demos leveraging the "id" attribute of the PointItem element to place a halo around the clicked PointItem
</div>
<br />
<div id="visualization"></div>

<script type="text/javascript">

  var container = document.getElementById('visualization');
  var items = [];
  var numItems = 10;
  var checkGroupId = 1;
  var infoGroupId = 2;
  var warningGroupId = 3;
  var haloGroupId = 0;
  var haloItem = null;

  for (var i = 0; i < numItems; i++) {
      items.push({id: items.length, group: checkGroupId, x: new Date('2014-06-11').valueOf() + Math.floor(Math.random() * 30000), y: 500 + (Math.random() * 100)});
  }

  for (var i = 0; i < numItems; i++) {
      items.push({id: items.length, group: infoGroupId, x: new Date('2014-06-11').valueOf() + Math.floor(Math.random() * 30000), y: 500 + (Math.random() * 100)});
  }

  for (var i = 0; i < numItems; i++) {
      items.push({id: items.length, group: warningGroupId, x: new Date('2014-06-11').valueOf() + Math.floor(Math.random() * 30000), y: 500 + (Math.random() * 100)});
  }

  var dataset = new vis.DataSet(items);
  var options = {
      sort: false,
      sampling:false,
      style:'points',
      dataAxis: {
          left: {
              range: {
                  min: 300, max: 800
              }
          }
      },
      height: '600px'
  };
  var groups = [
      {
          id: haloGroupId,
          content: 'Halo Item',
          options: {
              drawPoints: {
                  enabled: true,
                  size: 64,
                  style: 'image', // square, circle, image
                  imageUrl: 'images/halo.png'
              }
          }
      },
      {
          id: checkGroupId,
          content: 'Check Item',
          options: {
              drawPoints: {
                  enabled: true,
                  size: 32,
                  style: 'image', // square, circle, image
                  imageUrl: 'images/check-circle.png'
              }
          }
      },
      {
          id: infoGroupId,
          content: 'Info Item',
          options: {
              drawPoints: {
                  enabled: true,
                  size: 32,
                  style: 'image', // square, circle, image
                  imageUrl: 'images/info-circle.png'
              }
          }
      },
      {
          id: warningGroupId,
          content: 'Warning Item',
          options: {
              drawPoints: {
                  enabled: true,
                  size: 32,
                  style: 'image', // square, circle, image
                  imageUrl: 'images/exclamation-circle.png'
              }
          }
      }
  ];

  var graph2d = new vis.Graph2d(container, dataset, groups, options);
  graph2d.on('click', onClick);

  function onClick(props) {

      if (haloItem) {
          dataset.remove(haloItem.id);
          haloItem = null;
      }

      var firstTarget = props.event.firstTarget;
      if (firstTarget.nodeName === 'image' ) {
          var clickedItem = dataset.get(firstTarget.id);
          if (clickedItem && firstTarget.id && firstTarget.id !== 'haloItem') {
              haloItem = {
                  id: 'haloItem',
                  clickedItemId: clickedItem.id,
                  group: haloGroupId,
                  x: clickedItem.x,
                  y: clickedItem.y
              };
              dataset.add(haloItem);
          }
      }
  }

</script>
</body>
</html>